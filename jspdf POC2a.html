<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>POC2c</title>
</head>
<body>
<h1>POC2a</h1>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.0.272/jspdf.debug.js">  </script>
<script type="text/javascript">
    
    import { PDFDocumentFactory, PDFDocumentWriter, StandardFonts, drawText } from 'pdf-lib';
    
    // This should be a Uint8Array.
    // This data can be obtained in a number of different ways.
    // If your running in a Node environment, you could use fs.readFile().
    // In the browser, you could make a fetch() call and use res.arrayBuffer().
    const existingPdfDocBytes = fetch('https://github.com/deborasp/lifdigital/blob/master/hello_world.pdf').arrayBuffer();
    const pdfDoc = PDFDocumentFactory.load(existingPdfDocBytes);
    const [helveticaRef, helveticaFont] = pdfDoc.embedStandardFont(
      StandardFonts.Helvetica,
    );

    const pages = pdfDoc.getPages();
    const page  = pages[0];

    page.addFontDictionary('Helvetica', helveticaRef);

    const contentStream = pdfDoc.createContentStream(
      drawText(helveticaFont.encodeText('This text was added to the PDF with JavaScript!'), {
        x: 25,
        y: 25,
        size: 24,
        font: 'Helvetica',
        colorRgb: [0.95, 0.26, 0.21],
      }),
    );

    page.addContentStreams(pdfDoc.register(contentStream));

    const pdfBytes = PDFDocumentWriter.saveToBytes(pdfDoc);
    
    //poc2a create a PDF
    //var pdf = new jsPDF();
    //pdf.text(30, 30, 'POC2a!');
    //pdf.save('POC2.pdf');
</script>
</body>
</html>
